{
  "id": "795e58af-67d8-4595-8ea9-4521b524f563",
  "revision": 0,
  "last_node_id": 101,
  "last_link_id": 50,
  "nodes": [
    {
      "id": 100,
      "type": "Note",
      "pos": [
        -700,
        50
      ],
      "size": [
        700,
        1000
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "# FreeFuse SDXL â€” Model & LoRA Download Guide\n# FreeFuse SDXL â€” æ¨¡å‹ä¸LoRAä¸‹è½½æŒ‡å—\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## Required Models / æ‰€éœ€æ¨¡å‹\n\n### ğŸ“‚ checkpoints/\nâ€¢ sd_xl_base_1.0.safetensors\n  â†’ https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors?download=true\n  EN: SDXL Base 1.0 checkpoint (includes UNet + CLIP + VAE)\n  ä¸­: SDXL Base 1.0 æ£€æŸ¥ç‚¹æ¨¡å‹ï¼ˆåŒ…å«UNet + CLIP + VAEï¼‰\n\n### ğŸ“‚ vae/ (Optional / å¯é€‰)\nâ€¢ Built-in VAE from checkpoint is used by default\n  é»˜è®¤ä½¿ç”¨æ£€æŸ¥ç‚¹è‡ªå¸¦çš„VAE\nâ€¢ No separate VAE file required for SDXL\n  SDXLä¸éœ€è¦å•ç‹¬çš„VAEæ–‡ä»¶\n\n### ğŸ“‚ loras/ (LoRA Files)\nâ€¢ harry_potter_xl.safetensors\n  EN: SDXL LoRA for Harry Potter (custom trained)\n  ä¸­: Harry Potterè§’è‰²çš„SDXL LoRAï¼ˆè‡ªè®­ç»ƒï¼‰\nâ€¢ daiyu_lin_xl.safetensors\n  EN: SDXL LoRA for Daiyu Lin (custom trained)\n  ä¸­: æ—é»›ç‰è§’è‰²çš„SDXL LoRAï¼ˆè‡ªè®­ç»ƒï¼‰\n\nâš  SDXL LoRAs must be trained for SDXL architecture.\nFlux LoRAs are NOT compatible with SDXL!\nâš  SDXL LoRAå¿…é¡»åŸºäºSDXLæ¶æ„è®­ç»ƒï¼Œ\nFlux LoRAä¸SDXLä¸å…¼å®¹ï¼\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## Directory Structure / ç›®å½•ç»“æ„\nğŸ“‚ ComfyUI/models/\nâ”œâ”€ checkpoints/\nâ”‚  â””â”€ sd_xl_base_1.0.safetensors\nâ””â”€ loras/\n   â”œâ”€ harry_potter_xl.safetensors\n   â””â”€ daiyu_lin_xl.safetensors\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## Important Notes / é‡è¦æç¤º\nâ€¢ SDXL requires ~8GB VRAM for 1024Ã—1024\n  SDXLç”Ÿæˆ1024Ã—1024çº¦éœ€8GBæ˜¾å­˜\nâ€¢ Uses standard CFG (7.0 recommended)\n  ä½¿ç”¨æ ‡å‡†CFGå¼•å¯¼ï¼ˆæ¨è7.0ï¼‰\nâ€¢ 30 steps recommended / æ¨è30æ­¥\nâ€¢ Uses CLIPTextEncode (not CLIPTextEncodeFlux)\n  ä½¿ç”¨CLIPTextEncodeï¼ˆéCLIPTextEncodeFluxï¼‰\nâ€¢ Supports negative prompts / æ”¯æŒè´Ÿé¢æç¤ºè¯\nâ€¢ SDXL concept_text should be shorter than Flux\n  SDXLçš„concept_textåº”æ¯”Fluxæ›´ç®€çŸ­"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 1,
      "type": "CheckpointLoaderSimple",
      "pos": [
        50,
        100
      ],
      "size": [
        315,
        100
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            1
          ]
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "slot_index": 1,
          "links": [
            2
          ]
        },
        {
          "name": "VAE",
          "type": "VAE",
          "slot_index": 2,
          "links": [
            30
          ]
        }
      ],
      "title": "Load SDXL Checkpoint",
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple",
        "cnr_id": "comfy-core",
        "models": [
          {
            "name": "sd_xl_base_1.0.safetensors",
            "url": "https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors?download=true",
            "directory": "checkpoints"
          }
        ]
      },
      "widgets_values": [
        "sd_xl_base_1.0.safetensors"
      ]
    },
    {
      "id": 4,
      "type": "FreeFuseLoRALoader",
      "pos": [
        450,
        100
      ],
      "size": [
        315,
        170
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 1
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 2
        },
        {
          "name": "freefuse_data",
          "shape": 7,
          "type": "FREEFUSE_DATA",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            3
          ]
        },
        {
          "name": "clip",
          "type": "CLIP",
          "slot_index": 1,
          "links": [
            4
          ]
        },
        {
          "name": "freefuse_data",
          "type": "FREEFUSE_DATA",
          "slot_index": 2,
          "links": [
            5
          ]
        }
      ],
      "title": "LoRA 1: Harry Potter",
      "properties": {
        "Node name for S&R": "FreeFuseLoRALoader"
      },
      "widgets_values": [
        "harry_potter_xl.safetensors",
        "harry",
        1,
        1
      ]
    },
    {
      "id": 5,
      "type": "FreeFuseLoRALoader",
      "pos": [
        450,
        320
      ],
      "size": [
        315,
        170
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 3
        },
        {
          "name": "clip",
          "type": "CLIP",
          "link": 4
        },
        {
          "name": "freefuse_data",
          "shape": 7,
          "type": "FREEFUSE_DATA",
          "link": 5
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            6
          ]
        },
        {
          "name": "clip",
          "type": "CLIP",
          "slot_index": 1,
          "links": [
            7,
            8,
            9
          ]
        },
        {
          "name": "freefuse_data",
          "type": "FREEFUSE_DATA",
          "slot_index": 2,
          "links": [
            10
          ]
        }
      ],
      "title": "LoRA 2: Daiyu Lin",
      "properties": {
        "Node name for S&R": "FreeFuseLoRALoader"
      },
      "widgets_values": [
        "daiyu_lin_xl.safetensors",
        "daiyu",
        1,
        1
      ]
    },
    {
      "id": 6,
      "type": "FreeFuseConceptMap",
      "pos": [
        850,
        100
      ],
      "size": [
        380,
        424.0000000000001
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "freefuse_data",
          "shape": 7,
          "type": "FREEFUSE_DATA",
          "link": 10
        }
      ],
      "outputs": [
        {
          "name": "freefuse_data",
          "type": "FREEFUSE_DATA",
          "slot_index": 0,
          "links": [
            11
          ]
        }
      ],
      "title": "Concept Mapping",
      "properties": {
        "Node name for S&R": "FreeFuseConceptMap"
      },
      "widgets_values": [
        "harry",
        "an European man wearing Hogwarts uniform",
        "daiyu",
        "an Asian woman wearing Chinese traditional clothing",
        "",
        "",
        "",
        "",
        false,
        "autumn leaves blurred in the background"
      ]
    },
    {
      "id": 20,
      "type": "PrimitiveNode",
      "pos": [
        850,
        500
      ],
      "size": [
        380,
        130
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "widget": {
            "name": "prompt"
          },
          "slot_index": 0,
          "links": [
            35,
            36
          ]
        }
      ],
      "title": "Main Prompt",
      "properties": {
        "Run widget replace on values": false
      },
      "widgets_values": [
        "Realistic photography, an European man wearing Hogwarts uniform hugging an Asian woman wearing Chinese traditional clothing warmly, both faces close together, autumn leaves blurred in the background, high quality, detailed"
      ]
    },
    {
      "id": 8,
      "type": "FreeFuseTokenPositions",
      "pos": [
        1320,
        100
      ],
      "size": [
        340,
        156
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 7
        },
        {
          "name": "freefuse_data",
          "type": "FREEFUSE_DATA",
          "link": 11
        },
        {
          "name": "prompt",
          "type": "STRING",
          "widget": {
            "name": "prompt"
          },
          "link": 35
        }
      ],
      "outputs": [
        {
          "name": "freefuse_data",
          "type": "FREEFUSE_DATA",
          "slot_index": 0,
          "links": [
            14
          ]
        }
      ],
      "title": "Compute Token Positions",
      "properties": {
        "Node name for S&R": "FreeFuseTokenPositions"
      },
      "widgets_values": [
        "Realistic photography, an European man wearing Hogwarts uniform hugging an Asian woman wearing Chinese traditional clothing warmly, both faces close together, autumn leaves blurred in the background, high quality, detailed",
        true,
        true
      ]
    },
    {
      "id": 9,
      "type": "CLIPTextEncode",
      "pos": [
        1320,
        280
      ],
      "size": [
        340,
        120
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 8
        },
        {
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": 36
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            16,
            28
          ]
        }
      ],
      "title": "Positive Conditioning",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "Realistic photography, an European man wearing Hogwarts uniform hugging an Asian woman wearing Chinese traditional clothing warmly, both faces close together, autumn leaves blurred in the background, high quality, detailed"
      ]
    },
    {
      "id": 11,
      "type": "CLIPTextEncode",
      "pos": [
        1320,
        450
      ],
      "size": [
        340,
        100
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 9
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            38,
            39
          ]
        }
      ],
      "title": "Negative Conditioning",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "ugly, blurry, low quality, deformed"
      ]
    },
    {
      "id": 10,
      "type": "EmptyLatentImage",
      "pos": [
        1320,
        600
      ],
      "size": [
        340,
        106
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "slot_index": 0,
          "links": [
            17,
            22,
            50
          ]
        }
      ],
      "title": "Latent Image Size",
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        1024,
        1024,
        1
      ]
    },
    {
      "id": 12,
      "type": "FreeFusePhase1Sampler",
      "pos": [
        1750,
        100
      ],
      "size": [
        380,
        666
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 6
        },
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 16
        },
        {
          "name": "neg_conditioning",
          "type": "CONDITIONING",
          "link": 38
        },
        {
          "name": "latent",
          "type": "LATENT",
          "link": 17
        },
        {
          "name": "freefuse_data",
          "type": "FREEFUSE_DATA",
          "link": 14
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            18
          ]
        },
        {
          "name": "masks",
          "type": "FREEFUSE_MASKS",
          "slot_index": 1,
          "links": [
            19,
            20
          ]
        },
        {
          "name": "mask_preview",
          "type": "IMAGE",
          "slot_index": 2,
          "links": [
            21
          ]
        }
      ],
      "title": "Phase 1: Collect Masks",
      "properties": {
        "Node name for S&R": "FreeFusePhase1Sampler"
      },
      "widgets_values": [
        77,
        30,
        30,
        10,
        7,
        "euler",
        "normal",
        18,
        "output_early â˜… (recommended)",
        3,
        500,
        0.1,
        true,
        0.95,
        false,
        15,
        0.01,
        0.01,
        0.00004,
        0.2,
        0,
        0,
        1.3
      ]
    },
    {
      "id": 13,
      "type": "PreviewImage",
      "pos": [
        2220,
        100
      ],
      "size": [
        320,
        280
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 21
        }
      ],
      "outputs": [],
      "title": "Phase 1 Mask Preview",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 15,
      "type": "FreeFuseMaskPreview",
      "pos": [
        2220,
        420
      ],
      "size": [
        320,
        150
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "masks",
          "type": "FREEFUSE_MASKS",
          "link": 20
        }
      ],
      "outputs": [
        {
          "name": "combined_preview",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            40
          ]
        },
        {
          "name": "individual_masks",
          "type": "IMAGE",
          "slot_index": 1,
          "links": [
            41
          ]
        }
      ],
      "title": "Detailed Mask Preview",
      "properties": {
        "Node name for S&R": "FreeFuseMaskPreview"
      },
      "widgets_values": [
        512,
        512,
        true,
        true
      ]
    },
    {
      "id": 25,
      "type": "PreviewImage",
      "pos": [
        2600,
        420
      ],
      "size": [
        260,
        246
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 40
        }
      ],
      "outputs": [],
      "title": "Combined Masks",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 26,
      "type": "PreviewImage",
      "pos": [
        2600,
        680
      ],
      "size": [
        260,
        246
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 41
        }
      ],
      "outputs": [],
      "title": "Individual Masks",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 14,
      "type": "FreeFuseMaskApplicator",
      "pos": [
        1750,
        600
      ],
      "size": [
        380,
        320
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 18
        },
        {
          "name": "masks",
          "type": "FREEFUSE_MASKS",
          "link": 19
        },
        {
          "name": "freefuse_data",
          "type": "FREEFUSE_DATA",
          "link": 14
        },
        {
          "name": "latent",
          "shape": 7,
          "type": "LATENT",
          "link": 22
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            23
          ]
        }
      ],
      "title": "Phase 2: Apply Masks",
      "properties": {
        "Node name for S&R": "FreeFuseMaskApplicator"
      },
      "widgets_values": [
        true,
        true,
        5,
        7,
        true,
        true,
        "all"
      ]
    },
    {
      "id": 16,
      "type": "KSampler",
      "pos": [
        1750,
        1000
      ],
      "size": [
        380,
        350
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 23
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 28
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 39
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 50
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "slot_index": 0,
          "links": [
            24
          ]
        }
      ],
      "title": "Phase 2: Full Generation",
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        42,
        "fixed",
        30,
        7,
        "euler",
        "normal",
        1
      ]
    },
    {
      "id": 17,
      "type": "VAEDecode",
      "pos": [
        2220,
        1050
      ],
      "size": [
        200,
        50
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 24
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 30
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            26
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      },
      "widgets_values": []
    },
    {
      "id": 18,
      "type": "SaveImage",
      "pos": [
        2500,
        950
      ],
      "size": [
        400,
        400
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 26
        }
      ],
      "outputs": [],
      "title": "Final Output",
      "properties": {
        "Node name for S&R": "SaveImage"
      },
      "widgets_values": [
        "FreeFuse/sdxl_output"
      ]
    },
    {
      "id": 101,
      "type": "Note",
      "pos": [
        -688.984375,
        1111.05078125
      ],
      "size": [
        700,
        2200
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "# FreeFuse SDXL â€” Complete Parameter Guide\n# FreeFuse SDXL â€” å®Œæ•´å‚æ•°æŒ‡å—\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## Workflow Overview / å·¥ä½œæµæ¦‚è§ˆ\nEN: FreeFuse uses a two-phase approach for multi-LoRA composition:\n  Phase 1: Collect cross-attention â†’ generate spatial masks\n  Phase 2: Apply masks to LoRAs â†’ full denoising generation\nä¸­: FreeFuse é‡‡ç”¨ä¸¤é˜¶æ®µæ–¹æ³•å®ç°å¤šLoRAåˆæˆï¼š\n  é˜¶æ®µ1ï¼šæ”¶é›†äº¤å‰æ³¨æ„åŠ› â†’ ç”Ÿæˆç©ºé—´æ©ç \n  é˜¶æ®µ2ï¼šå¯¹LoRAåº”ç”¨æ©ç  â†’ å®Œæ•´å»å™ªç”Ÿæˆ\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## 1. LoRA Loader / LoRAåŠ è½½å™¨\nâ€¢ adapter_name (string): Unique ID, MUST match ConceptMap\n  é€‚é…å™¨åç§°ï¼šå¿…é¡»ä¸ConceptMapä¸­ä¸€è‡´\nâ€¢ strength_model (float, default=1.0): LoRA strength for UNet\n  UNetçš„LoRAå¼ºåº¦\nâ€¢ strength_clip (float, default=1.0): LoRA strength for text encoder\n  æ–‡æœ¬ç¼–ç å™¨çš„LoRAå¼ºåº¦\n\n## 2. Concept Map / æ¦‚å¿µæ˜ å°„\nâ€¢ concept_text: Description text for this concept\n  MUST appear verbatim in prompt\n  æ¦‚å¿µæ–‡æœ¬ï¼šå¿…é¡»åŸæ ·å‡ºç°åœ¨æç¤ºè¯ä¸­\nâ€¢ enable_background (bool, default=true): Background as separate concept\n  å°†èƒŒæ™¯ä½œä¸ºç‹¬ç«‹æ¦‚å¿µå¤„ç†\nâ€¢ background_text (string): Background description (optional)\n  èƒŒæ™¯æè¿°ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™è‡ªåŠ¨æ£€æµ‹ï¼‰\n\n## 3. Token Positions / Tokenä½ç½®\nâ€¢ filter_meaningless (bool, default=true): Remove articles/prepositions\n  è¿‡æ»¤å† è¯/ä»‹è¯ç­‰æ— æ„ä¹‰è¯\nâ€¢ filter_single_char (bool, default=true): Remove single-char tokens\n  è¿‡æ»¤å•å­—ç¬¦token\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## 4. Phase 1 Sampler / é˜¶æ®µ1é‡‡æ ·å™¨\n\n### Core Parameters / æ ¸å¿ƒå‚æ•°\nâ€¢ steps (int, default=30): Total steps, MUST match Phase 2\n  æ€»æ­¥æ•°ï¼šé¡»ä¸é˜¶æ®µ2ä¸€è‡´\nâ€¢ collect_step (int, default=10): Collect attention then early-stop\n  æ”¶é›†æ³¨æ„åŠ›åæå‰ç»ˆæ­¢çš„æ­¥éª¤ï¼ˆSDXLæ¨è10ï¼‰\nâ€¢ cfg (float, default=7.0): Standard CFG guidance scale\n  æ ‡å‡†CFGå¼•å¯¼å°ºåº¦ï¼ˆSDXLæ¨è7.0ï¼‰\nâ€¢ sampler_name: euler recommended for SDXL\n  SDXLæ¨èeuler\nâ€¢ scheduler: normal recommended for SDXL\n  SDXLæ¨ènormal\n\n### Block Selection [SDXL] / Blocké€‰æ‹©\nâ€¢ collect_region (enum): UNet region to collect attention\n  æ”¶é›†æ³¨æ„åŠ›çš„UNetåŒºåŸŸ\n  â˜… output_early recommended / æ¨èoutput_early\nâ€¢ collect_tf_index (int, default=3): Transformer index in region (0-9)\n  è¯¥åŒºåŸŸå†…çš„transformerç´¢å¼•ï¼ˆ0-9ï¼‰\nâ€¢ collect_block: [Flux only, ignored for SDXL]\n  [ä»…Fluxï¼ŒSDXLå¿½ç•¥æ­¤å‚æ•°]\n\n### Similarity / ç›¸ä¼¼åº¦è®¡ç®—\nâ€¢ temperature (float, default=0â†’auto:300):\n  Softmax temperature. Higher = sharper maps\n  Softmaxæ¸©åº¦ï¼Œè¶Šé«˜â†’è¶Šé”åˆ©çš„æ˜ å°„ï¼ˆSDXLè‡ªåŠ¨å€¼300ï¼‰\nâ€¢ top_k_ratio (float, default=0.1):\n  Ratio of top-k tokens for similarity\n  top-k tokenæ¯”ä¾‹\n\n### LoRA Control / LoRAæ§åˆ¶\nâ€¢ disable_lora_phase1 (bool, default=true â˜…):\n  Disable LoRA for cleaner base-model attention\n  ç¦ç”¨LoRAä»¥è·å–æ›´å¹²å‡€çš„æ³¨æ„åŠ› â˜…æ¨è\n\n### Mask Post-processing / æ©ç åå¤„ç†\nâ€¢ bg_scale (float, default=0.95):\n  Background scaling. Higher = more background\n  èƒŒæ™¯ç¼©æ”¾ï¼Œè¶Šé«˜â†’èƒŒæ™¯è¶Šå¤§\nâ€¢ use_morphological_cleaning (bool, default=false):\n  Clean mask boundaries with morphology\n  å½¢æ€å­¦æ¸…ç†æ©ç è¾¹ç•Œ\n\n### Mask Balancing (Advanced) / æ©ç å¹³è¡¡ï¼ˆé«˜çº§ï¼‰\nâ€¢ balance_iterations (int, 15): Balanced argmax iterations\n  å¹³è¡¡argmaxè¿­ä»£æ¬¡æ•°\nâ€¢ balance_lr (float, 0.01): Bias update learning rate\n  åç½®æ›´æ–°å­¦ä¹ ç‡\nâ€¢ gravity_weight (float, 0.01): Centroid attraction\n  è´¨å¿ƒå¸å¼•åŠ›ï¼ˆSDXLæ¨è0.01ï¼Œæ¯”Fluxå¤§ï¼‰\nâ€¢ spatial_weight (float, 0.00004): Neighbor voting\n  é‚»åŸŸæŠ•ç¥¨ï¼ˆç©ºé—´å¹³æ»‘æ€§ï¼‰\nâ€¢ momentum (float, 0.2): Smoothing between iters\n  è¿­ä»£é—´å¹³æ»‘åŠ¨é‡\nâ€¢ centroid_margin (float, 0.0): Clamp from borders\n  è´¨å¿ƒè¾¹ç•Œå¤¹ç´§\nâ€¢ border_penalty (float, 0.0): Border assignment penalty\n  è¾¹ç•Œåˆ†é…æƒ©ç½š\nâ€¢ anisotropy (float, 1.3): H-stretch >1=wider masks\n  å„å‘å¼‚æ€§ >1=æ›´å®½çš„æ©ç \n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## 5. Mask Applicator / æ©ç åº”ç”¨å™¨\n\n### LoRA Masking / LoRAæ©ç \nâ€¢ enable_token_masking (bool, true):\n  Zero LoRA at other concepts' tokens\n  åœ¨å…¶ä»–æ¦‚å¿µtokenå¤„æ¸…é›¶LoRAè¾“å‡º\n\n### Attention Bias / æ³¨æ„åŠ›åç½®\nâ€¢ enable_attention_bias (bool, true):\n  Apply attention bias to guide cross-attention\n  å¯ç”¨æ³¨æ„åŠ›åç½®å¼•å¯¼äº¤å‰æ³¨æ„åŠ›\nâ€¢ bias_scale (float, 5.0): Negative bias strength\n  Suppress cross-LoRA attention (5-10 typical)\n  è´Ÿåç½®å¼ºåº¦ï¼ˆæŠ‘åˆ¶è·¨LoRAæ³¨æ„åŠ›ï¼Œå…¸å‹å€¼5-10ï¼‰\nâ€¢ positive_bias_scale (float, 7.0):\n  Enhance same-LoRA attention (SDXL uses higher value)\n  æ­£åç½®å¼ºåº¦ï¼ˆSDXLä½¿ç”¨è¾ƒé«˜å€¼7.0ï¼‰\nâ€¢ bidirectional: [Flux only, ignored for SDXL]\n  [ä»…Fluxï¼ŒSDXLäº¤å‰æ³¨æ„åŠ›æœ¬èº«æ˜¯å•å‘çš„]\nâ€¢ use_positive_bias (bool, true):\n  Add positive bias for matched pairs\n  ä¸ºåŒ¹é…å¯¹æ·»åŠ æ­£åç½®\nâ€¢ bias_blocks: Which blocks get bias\n  åº”ç”¨åç½®çš„blockèŒƒå›´\n  â˜… all recommended for SDXL / SDXLæ¨èall\n  - all: All blocks / æ‰€æœ‰block\n  - none: Disable / ç¦ç”¨\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## 6. KSampler (Phase 2)\nâ€¢ seed: Same as Phase 1 / ä¸é˜¶æ®µ1ç›¸åŒ\nâ€¢ steps: MUST match Phase 1 (30) / é¡»ä¸€è‡´\nâ€¢ cfg: 7.0 recommended for SDXL / SDXLæ¨è7.0\nâ€¢ sampler/scheduler: Match Phase 1 / ä¸é˜¶æ®µ1ä¸€è‡´\nâ€¢ denoise: 1.0 for full generation / å®Œæ•´ç”Ÿæˆ\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n## SDXL vs Flux Key Differences / SDXLä¸Fluxä¸»è¦åŒºåˆ«\nâ€¢ CFG: SDXL uses standard CFG (7.0) / SDXLç”¨æ ‡å‡†CFG\n  Flux uses guidance embedding (cfg=1.0)\nâ€¢ Negative prompt: SDXL supported âœ“ / SDXLæ”¯æŒ âœ“\n  Flux not supported âœ—\nâ€¢ collect_step: SDXL=10, Flux=5\nâ€¢ temperature auto: SDXL=300, Flux=4000\nâ€¢ gravity_weight: SDXL=0.01, Flux=0.00004\nâ€¢ positive_bias_scale: SDXL=7.0, Flux=1.0\nâ€¢ bias_blocks: SDXL=all, Flux=double_stream_only\nâ€¢ Text encoder: SDXL=CLIPTextEncode\n  Flux=CLIPTextEncodeFlux"
      ],
      "color": "#224",
      "bgcolor": "#335"
    }
  ],
  "links": [
    [
      1,
      1,
      0,
      4,
      0,
      "MODEL"
    ],
    [
      2,
      1,
      1,
      4,
      1,
      "CLIP"
    ],
    [
      3,
      4,
      0,
      5,
      0,
      "MODEL"
    ],
    [
      4,
      4,
      1,
      5,
      1,
      "CLIP"
    ],
    [
      5,
      4,
      2,
      5,
      2,
      "FREEFUSE_DATA"
    ],
    [
      6,
      5,
      0,
      12,
      0,
      "MODEL"
    ],
    [
      7,
      5,
      1,
      8,
      0,
      "CLIP"
    ],
    [
      8,
      5,
      1,
      9,
      0,
      "CLIP"
    ],
    [
      9,
      5,
      1,
      11,
      0,
      "CLIP"
    ],
    [
      10,
      5,
      2,
      6,
      0,
      "FREEFUSE_DATA"
    ],
    [
      11,
      6,
      0,
      8,
      1,
      "FREEFUSE_DATA"
    ],
    [
      14,
      8,
      0,
      12,
      2,
      "FREEFUSE_DATA"
    ],
    [
      16,
      9,
      0,
      12,
      1,
      "CONDITIONING"
    ],
    [
      17,
      10,
      0,
      12,
      3,
      "LATENT"
    ],
    [
      18,
      12,
      0,
      14,
      0,
      "MODEL"
    ],
    [
      19,
      12,
      1,
      14,
      1,
      "FREEFUSE_MASKS"
    ],
    [
      20,
      12,
      1,
      15,
      0,
      "FREEFUSE_MASKS"
    ],
    [
      21,
      12,
      2,
      13,
      0,
      "IMAGE"
    ],
    [
      22,
      10,
      0,
      14,
      3,
      "LATENT"
    ],
    [
      23,
      14,
      0,
      16,
      0,
      "MODEL"
    ],
    [
      24,
      16,
      0,
      17,
      0,
      "LATENT"
    ],
    [
      26,
      17,
      0,
      18,
      0,
      "IMAGE"
    ],
    [
      28,
      9,
      0,
      16,
      1,
      "CONDITIONING"
    ],
    [
      30,
      1,
      2,
      17,
      1,
      "VAE"
    ],
    [
      35,
      20,
      0,
      8,
      2,
      "STRING"
    ],
    [
      36,
      20,
      0,
      9,
      1,
      "STRING"
    ],
    [
      38,
      11,
      0,
      12,
      2,
      "CONDITIONING"
    ],
    [
      39,
      11,
      0,
      16,
      2,
      "CONDITIONING"
    ],
    [
      40,
      15,
      0,
      25,
      0,
      "IMAGE"
    ],
    [
      41,
      15,
      1,
      26,
      0,
      "IMAGE"
    ],
    [
      50,
      10,
      0,
      16,
      3,
      "LATENT"
    ]
  ],
  "groups": [
    {
      "id": 1,
      "title": "1. Load Checkpoint",
      "bounding": [
        30,
        50,
        380,
        280
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 2,
      "title": "2. Load LoRAs",
      "bounding": [
        430,
        50,
        380,
        480
      ],
      "color": "#2E8B57",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 3,
      "title": "3. Concept Mapping",
      "bounding": [
        830,
        50,
        420,
        620
      ],
      "color": "#88A825",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 4,
      "title": "4. Conditioning",
      "bounding": [
        1300,
        50,
        400,
        700
      ],
      "color": "#DAA520",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 5,
      "title": "5. Phase 1: Masks",
      "bounding": [
        1730,
        50,
        520,
        500
      ],
      "color": "#A8442A",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 6,
      "title": "6. Phase 2: Generate",
      "bounding": [
        1730,
        550,
        520,
        850
      ],
      "color": "#7B3F9E",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 1.174030132313047,
      "offset": [
        494.7243956090085,
        11.80860895394125
      ]
    },
    "info": {
      "name": "FreeFuse SDXL Complete Workflow",
      "description": "Two-phase FreeFuse workflow for SDXL model with multi-LoRA composition. Uses CheckpointLoaderSimple for SDXL base (UNet + CLIP + VAE), CLIPTextEncode for standard CFG prompts, and supports negative prompts.",
      "author": "FreeFuse Team",
      "version": "3.1",
      "notes": "SDXL uses standard CFG guidance (7.0 recommended). Supports negative prompts. Requires ~8GB VRAM for 1024x1024. SDXL LoRAs must be trained specifically for SDXL architecture - Flux LoRAs are NOT compatible.",
      "models": {
        "checkpoints": [
          {
            "name": "sd_xl_base_1.0.safetensors",
            "url": "https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors?download=true"
          }
        ],
        "loras": [
          {
            "name": "harry_potter_xl.safetensors",
            "note": "Custom trained SDXL LoRA for Harry Potter character"
          },
          {
            "name": "daiyu_lin_xl.safetensors",
            "note": "Custom trained SDXL LoRA for Daiyu Lin character"
          }
        ]
      }
    },
    "workflowRendererVersion": "LG",
    "frontendVersion": "1.37.11"
  },
  "version": 0.4
}