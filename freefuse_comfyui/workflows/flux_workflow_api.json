{
  "1": {
    "inputs": {
      "unet_name": "flux1-dev-fp8.safetensors",
      "weight_dtype": "fp8_e4m3fn"
    },
    "class_type": "UNETLoader",
    "_meta": {
      "title": "Load Flux UNET"
    }
  },
  "2": {
    "inputs": {
      "clip_name1": "clip_l.safetensors",
      "clip_name2": "t5xxl_fp8_e4m3fn.safetensors",
      "type": "flux",
      "device": "default"
    },
    "class_type": "DualCLIPLoader",
    "_meta": {
      "title": "Load CLIP + T5"
    }
  },
  "3": {
    "inputs": {
      "vae_name": "ae.safetensors"
    },
    "class_type": "VAELoader",
    "_meta": {
      "title": "Load Flux VAE"
    }
  },
  "4": {
    "inputs": {
      "lora_name": "harry_potter_flux.safetensors",
      "adapter_name": "harry",
      "strength_model": 1,
      "strength_clip": 1,
      "model": [
        "1",
        0
      ],
      "clip": [
        "2",
        0
      ]
    },
    "class_type": "FreeFuseLoRALoader",
    "_meta": {
      "title": "LoRA 1: Harry Potter"
    }
  },
  "5": {
    "inputs": {
      "lora_name": "daiyu_lin_flux.safetensors",
      "adapter_name": "daiyu",
      "strength_model": 1,
      "strength_clip": 1,
      "model": [
        "4",
        0
      ],
      "clip": [
        "4",
        1
      ],
      "freefuse_data": [
        "4",
        2
      ]
    },
    "class_type": "FreeFuseLoRALoader",
    "_meta": {
      "title": "LoRA 2: Daiyu Lin"
    }
  },
  "6": {
    "inputs": {
      "adapter_name_1": "harry",
      "concept_text_1": "harry potter, an European photorealistic style teenage wizard boy with messy black hair, round wire-frame glasses, and bright green eyes, wearing a white shirt, burgundy and gold striped tie, and dark robes",
      "adapter_name_2": "daiyu",
      "concept_text_2": "daiyu_lin, a young East Asian photorealistic style woman in traditional Chinese hanfu dress, elaborate black updo hairstyle adorned with delicate white floral hairpins and ornaments, dangling red tassel earrings, soft pink and red color palette, gentle smile with knowing expression",
      "adapter_name_3": "",
      "concept_text_3": "",
      "adapter_name_4": "",
      "concept_text_4": "",
      "enable_background": true,
      "background_text": "autumn leaves blurred in the background",
      "freefuse_data": [
        "5",
        2
      ]
    },
    "class_type": "FreeFuseConceptMap",
    "_meta": {
      "title": "Concept Mapping"
    }
  },
  "8": {
    "inputs": {
      "prompt": "Realistic photography, harry potter, an European photorealistic style teenage wizard boy with messy black hair, round wire-frame glasses, and bright green eyes, wearing a white shirt, burgundy and gold striped tie, and dark robes hugging daiyu_lin, a young East Asian photorealistic style woman in traditional Chinese hanfu dress, elaborate black updo hairstyle adorned with delicate white floral hairpins and ornaments, dangling red tassel earrings, soft pink and red color palette, gentle smile with knowing expression, autumn leaves blurred in the background, high quality, detailed",
      "filter_meaningless": true,
      "filter_single_char": true,
      "clip": [
        "5",
        1
      ],
      "freefuse_data": [
        "6",
        0
      ]
    },
    "class_type": "FreeFuseTokenPositions",
    "_meta": {
      "title": "Compute Token Positions"
    }
  },
  "9": {
    "inputs": {
      "clip_l": "Realistic photography, harry potter, an European photorealistic style teenage wizard boy with messy black hair, round wire-frame glasses, and bright green eyes, wearing a white shirt, burgundy and gold striped tie, and dark robes hugging daiyu_lin, a young East Asian photorealistic style woman in traditional Chinese hanfu dress, elaborate black updo hairstyle adorned with delicate white floral hairpins and ornaments, dangling red tassel earrings, soft pink and red color palette, gentle smile with knowing expression, autumn leaves blurred in the background, high quality, detailed",
      "t5xxl": "Realistic photography, harry potter, an European photorealistic style teenage wizard boy with messy black hair, round wire-frame glasses, and bright green eyes, wearing a white shirt, burgundy and gold striped tie, and dark robes hugging daiyu_lin, a young East Asian photorealistic style woman in traditional Chinese hanfu dress, elaborate black updo hairstyle adorned with delicate white floral hairpins and ornaments, dangling red tassel earrings, soft pink and red color palette, gentle smile with knowing expression, autumn leaves blurred in the background, high quality, detailed",
      "guidance": 3.5,
      "clip": [
        "5",
        1
      ]
    },
    "class_type": "CLIPTextEncodeFlux",
    "_meta": {
      "title": "Positive Conditioning"
    }
  },
  "10": {
    "inputs": {
      "width": 1024,
      "height": 1024,
      "batch_size": 1
    },
    "class_type": "EmptySD3LatentImage",
    "_meta": {
      "title": "Latent Image Size"
    }
  },
  "11": {
    "inputs": {
      "clip_l": "",
      "t5xxl": "",
      "guidance": 3.5,
      "clip": [
        "5",
        1
      ]
    },
    "class_type": "CLIPTextEncodeFlux",
    "_meta": {
      "title": "Negative Conditioning"
    }
  },
  "12": {
    "inputs": {
      "seed": 42,
      "steps": 28,
      "collect_step": 5,
      "cfg": 1,
      "sampler_name": "euler",
      "scheduler": "simple",
      "collect_block": 18,
      "collect_region": "output_early â˜… (recommended)",
      "collect_tf_index": 3,
      "temperature": 4000,
      "top_k_ratio": 0.1,
      "disable_lora_phase1": true,
      "bg_scale": 0.95,
      "use_morphological_cleaning": true,
      "balance_iterations": 15,
      "balance_lr": 0.01,
      "gravity_weight": 0.0004,
      "spatial_weight": 0.0004,
      "momentum": 0.2,
      "centroid_margin": 0,
      "border_penalty": 0,
      "anisotropy": 1.3,
      "model": [
        "5",
        0
      ],
      "conditioning": [
        "9",
        0
      ],
      "neg_conditioning": [
        "11",
        0
      ],
      "latent": [
        "10",
        0
      ],
      "freefuse_data": [
        "8",
        0
      ]
    },
    "class_type": "FreeFusePhase1Sampler",
    "_meta": {
      "title": "Phase 1: Collect Masks"
    }
  },
  "13": {
    "inputs": {
      "images": [
        "12",
        2
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Phase 1 Mask Preview"
    }
  },
  "14": {
    "inputs": {
      "enable_token_masking": true,
      "enable_attention_bias": true,
      "bias_scale": 5,
      "positive_bias_scale": 1,
      "bidirectional": true,
      "use_positive_bias": true,
      "bias_blocks": "all",
      "model": [
        "12",
        0
      ],
      "masks": [
        "12",
        1
      ],
      "freefuse_data": [
        "8",
        0
      ],
      "latent": [
        "10",
        0
      ]
    },
    "class_type": "FreeFuseMaskApplicator",
    "_meta": {
      "title": "Phase 2: Apply Masks"
    }
  },
  "15": {
    "inputs": {
      "width": 512,
      "height": 512,
      "show_labels": true,
      "show_coverage": true,
      "masks": [
        "12",
        1
      ]
    },
    "class_type": "FreeFuseMaskPreview",
    "_meta": {
      "title": "Detailed Mask Preview"
    }
  },
  "16": {
    "inputs": {
      "seed": 42,
      "steps": 28,
      "cfg": 1,
      "sampler_name": "euler",
      "scheduler": "simple",
      "denoise": 1,
      "model": [
        "14",
        0
      ],
      "positive": [
        "9",
        0
      ],
      "negative": [
        "11",
        0
      ],
      "latent_image": [
        "10",
        0
      ]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "Phase 2: Full Generation"
    }
  },
  "17": {
    "inputs": {
      "samples": [
        "16",
        0
      ],
      "vae": [
        "3",
        0
      ]
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE Decode"
    }
  },
  "18": {
    "inputs": {
      "filename_prefix": "FreeFuse/flux_output",
      "images": [
        "17",
        0
      ]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Final Output"
    }
  },
  "25": {
    "inputs": {
      "images": [
        "15",
        0
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Combined Masks"
    }
  },
  "26": {
    "inputs": {
      "images": [
        "15",
        1
      ]
    },
    "class_type": "PreviewImage",
    "_meta": {
      "title": "Individual Masks"
    }
  }
}